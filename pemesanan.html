<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pemesanan Karangan Bunga</title>
  <style>
    :root{
      --accent:#a95fa9;
      --accent-dark:#944b94;
      --bg:#f4e6f8;
    }
    html,body { height:100%; margin:0; font-family: Arial, Helvetica, sans-serif; background:var(--bg); }
    .container{
      max-width: 600px;
      margin: 48px auto;
      background:#fff;
      padding: 28px;
      border-radius:14px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    }
    h2 { text-align:center; color:var(--accent); margin:0 0 12px; }
    label { display:block; margin-top:14px; font-weight:600; }
    input, textarea, select {
      width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #d6cbe0; box-sizing:border-box;
    }
    button {
      width:100%; margin-top:22px; padding:12px; background:var(--accent); color:white; border:none; border-radius:10px;
      font-size:16px; cursor:pointer;
    }
    button:hover { background:var(--accent-dark); }

    /* THANK YOU AREA */
    #thankYouArea {
      display:none;
      text-align:center;
      padding:28px 10px;
    }
    #thankYouArea .message {
      font-size:26px;
      font-weight:700;
      color:var(--accent);
      margin-bottom:6px;
    }
    #thankYouArea .sub {
      color:#555; margin-bottom:12px;
    }

    /* canvas confetti */
    #confettiCanvas {
      position: fixed;
      left:0; top:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:9999;
      display:none;
    }

    /* emoji burst (floating emoji) */
    .emoji-burst {
      position: fixed;
      left:50%; top:38%;
      transform:translateX(-50%);
      z-index:10000;
      pointer-events:none;
    }
    .emoji-burst span {
      display:inline-block;
      font-size:28px;
      opacity:0;
      transform:translateY(0) scale(0.6);
      animation:burst 1200ms ease-out forwards;
      margin:0 2px;
      filter:drop-shadow(0 2px 2px rgba(0,0,0,0.15));
    }
    @keyframes burst {
      0% { opacity:0; transform:translateY(0) scale(0.6); }
      30% { opacity:1; transform:translateY(-40px) scale(1.2); }
      100% { opacity:0; transform:translateY(-140px) scale(1); }
    }

    /* small helper for return */
    .btn-link { display:inline-block; margin-top:12px; text-decoration:none; color:var(--accent); font-weight:600; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Form Pemesanan</h2>

    <form id="orderForm" onsubmit="event.preventDefault(); submitOrder();">
      <label>Nama Pemesan</label>
      <input id="nama" type="text" placeholder="Masukkan nama Anda" required>

      <label>Custom Bunga</label>
      <textarea id="custom" rows="3" placeholder="Contoh: Mawar merah, bunga meja, standing flower..." required></textarea>

      <label>Alamat Pengiriman</label>
      <textarea id="alamat" rows="3" placeholder="Alamat lengkap tujuan pengiriman" required></textarea>

      <label>Cara Pembayaran</label>
      <select id="pembayaran" required>
        <option value="">-- Pilih Pembayaran --</option>
        <option value="Transfer Bank">Transfer Bank</option>
        <option value="COD">COD</option>
        <option value="E-Wallet">E-Wallet (Dana/OVO/Gopay)</option>
      </select>

      <label>Tanggal Pengiriman</label>
      <input id="tanggal" type="date" required>

      <button type="submit">Kirim Pesanan</button>
    </form>

    <div id="thankYouArea" aria-live="polite">
      <div class="message">Thank You For Order <span id="smileEmoji">üòä</span></div>
      <div class="sub">Pesananmu sudah kami terima. Tim kami akan segera menghubungi untuk konfirmasi.</div>
      <a href="#" class="btn-link" onclick="location.reload()">Kembali ke Form</a>
    </div>
  </div>

  <!-- confetti canvas -->
  <canvas id="confettiCanvas"></canvas>

  <!-- emoji burst container (dynamically filled) -->
  <div class="emoji-burst" id="emojiBurstContainer" aria-hidden="true"></div>

  <script>
    // ---------- Confetti (simple particle system) ----------
    const canvas = document.getElementById('confettiCanvas');
    const ctx = canvas.getContext('2d');
    let W = 0, H = 0, particles = [], animId = null;

    function resizeCanvas(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function rand(min, max){ return Math.random()*(max-min)+min; }
    function colors(){ return ['#e67e22','#f1c40f','#e74c3c','#9b59b6','#3498db','#2ecc71','#a95fa9']; }

    function createParticles(x,y,count){
      const cols = colors();
      for(let i=0;i<count;i++){
        particles.push({
          x: x + rand(-20,20),
          y: y + rand(-20,20),
          vx: rand(-6,6),
          vy: rand(-10,-3),
          size: Math.floor(rand(6,13)),
          color: cols[Math.floor(rand(0,cols.length))],
          life: rand(50,120),
          tilt: rand(-0.2,0.2),
          rot: rand(0,Math.PI*2)
        });
      }
    }

    function updateParticles(){
      for(let i = particles.length-1; i>=0; i--){
        const p = particles[i];
        p.vy += 0.25;              // gravity
        p.vx *= 0.99;             // air resistance
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.tilt * 0.1;
        p.life -= 1;
        if(p.y > H + 20 || p.life <= 0) particles.splice(i,1);
      }
    }

    function drawParticles(){
      ctx.clearRect(0,0,W,H);
      for(const p of particles){
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.rot);
        // draw rectangle confetti
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
        ctx.restore();
      }
    }

    function runAnimation(){
      if(animId) cancelAnimationFrame(animId);
      function loop(){
        updateParticles();
        drawParticles();
        animId = requestAnimationFrame(loop);
        // stop when no particles
        if(particles.length === 0){
          cancelAnimationFrame(animId);
          animId = null;
          canvas.style.display = 'none';
        }
      }
      loop();
    }

    function launchConfetti(duration = 1800){
      canvas.style.display = 'block';
      // spawn particles from center-top area
      const start = Date.now();
      const interval = setInterval(()=>{
        const x = window.innerWidth * (0.25 + Math.random()*0.5);
        const y = window.innerHeight * (0.18 + Math.random()*0.12);
        createParticles(x,y,18);
      }, 120);

      runAnimation();

      setTimeout(()=>{
        clearInterval(interval);
      }, duration);

      // safety stop after extra time
      setTimeout(()=>{ particles = []; }, duration + 2000);
    }

    // ---------- Emoji burst ----------
    function showEmojiBurst(){
      const container = document.getElementById('emojiBurstContainer');
      container.innerHTML = '';
      const emojis = ['üòä','üå∏','üíê','‚ú®','üéâ'];
      // create multiple spans with slight delays
      for(let i=0;i<12;i++){
        const s = document.createElement('span');
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        s.style.animationDelay = (i*75) + 'ms';
        s.style.fontSize = (18 + Math.floor(Math.random()*20)) + 'px';
        container.appendChild(s);
      }
      // remove after animation
      setTimeout(()=> container.innerHTML = '', 1600);
    }

    // ---------- Submit handler ----------
    function submitOrder(){
      // optional: validate or gather data (already required attributes handle most)
      // show thank you area and animate
      document.getElementById('orderForm').style.display = 'none';
      const thank = document.getElementById('thankYouArea');
      thank.style.display = 'block';

      // show emoji in the message bigger briefly
      const smile = document.getElementById('smileEmoji');
      smile.style.transform = 'scale(1.25)';
      smile.style.transition = 'transform 250ms ease-out';
      setTimeout(()=> smile.style.transform = 'scale(1)', 500);

      // launch confetti + emoji burst
      launchConfetti(2000);
      showEmojiBurst();
    }
  </script>
</body>
</html>
